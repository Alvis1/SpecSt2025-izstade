<html>
  <head>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script>
    <script src="scripts/navmesh.js"></script>
    <script src="scripts/lightmaps.js"></script>
  </head>

  <body>
    <a-scene keyboard-shortcuts="" screenshot="" xr-mode-ui="" device-orientation-permission-ui="">

      <!-- GRUPO CUEVAS -->
      <a-entity id="grupoCuevas"
        animation="property: rotation; from: 0 0 0; to: 0 0 360; loop: true; dur: 250000; easing: linear;">
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5 5 5" position="-16.58 90 -62.25"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="6.18 5 5" position="34.29881 -100 -38.38705" rotation="-0.03241 -49.41723 -26.50665"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="3.49 3.74 0.58" position="-110 19.54 -23.25207" rotation="-173.85 -137.8 31.04324"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5.59 5 5" position="-98.4 35 -65.4748" rotation="1.56 48.90253 1.50775"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5 6.35 5" position="-41.78898 -61.73 -57.02345" rotation="3.4 43.0257 104.1368"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5 5 5" position="0 -14.16779 -1.55"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5.72 5 5" position="35.03881 18.59184 -38.38705" rotation="26.7176 -33.2172 -25.1866"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5 5 5" position="-41.57841 -15.40806 -1.55" rotation="2.0896 96.0426 47.8466"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5 5 5" position="38.89872 -42.54463 -9.63207" rotation="-51.9529 -78.08899 31.40324"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5 5 5" position="4.86254 -69.97942 -13.3948" rotation="-74.3659 74.3825 4.93775"></a-entity>
          <a-entity gltf-model="objects/cueva 2411.glb" scale="5 5 5" position="-21.44898 42.95721 -42.99345" rotation="3.4 43.0257 104.1368"></a-entity>
      </a-entity>

      <!-- PLANO -->
      <a-plane id="floor" position="0 -15 120" rotation="-90 0 0" width="7" height="300"
               color="#9BC9A4" material="opacity: 0.56; color: #371818"
               scale="1 1.57 1">
      </a-plane>

      <!-- NAVMESH (límite de movimiento) -->
      <a-entity id="navmesh01" geometry="primitive: plane; width: 7; height: 300"
                rotation="-90 0 0" position="0 -16 120"></a-entity>

      <!-- ESFERA -->
      <a-entity gltf-model="objects/esfera version 1.glb"
                position="0 0 0" rotation="0 0 0"
                animation="property: rotation; from: 0 0 0; to: 360 360 360; dir: alternate; dur: 7000; easing: linear; loop: true;">
      </a-entity>

      <!-- SKY -->
      <a-sky color="#080c16" position="0 -0.08631 0"></a-sky>

      <!-- CÁMARA -->
      <a-entity camera listener look-controls wasd-controls="acceleration: 40"
                navmesh="navmesh: #navmesh01" position="0 -12 120">
      </a-entity>

      <!-- SONIDO -->
      <a-entity id="audio" sound="src: url(objects/audio_sstudies.ogg); autoplay: false; loop: true"></a-entity>

    </a-scene>

    <script>
      // Reproducir audio al primer clic en cualquier parte
      const scene = document.querySelector("a-scene");
      const audioEntity = document.querySelector("audio_sstudies");

      function startAudio() {
        setTimeout(() => { audioEntity.components.sound.playSound(); }, 200);
        scene.removeEventListener("click", startAudio);
      }

      scene.addEventListener("click", startAudio);
    </script>

  </body>
</html>
